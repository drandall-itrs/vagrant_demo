<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

	<!-- <bean id="contexts" class="org.eclipse.jetty.server.handler.ContextHandlerCollection" /> -->

	<bean id="Server" class="org.eclipse.jetty.server.Server" init-method="start" destroy-method="stop">

		<property name="connectors">
			<list>
				<bean id="Connector" class="org.eclipse.jetty.server.nio.SelectChannelConnector">
					<property name="port" value="#{ systemProperties['webapp.port'] }" />
				</bean>

				<!-- Uncomment this connector to enable SSL (and comment out the first one) -->
				<!--
				<bean id="SslConnector" class="org.eclipse.jetty.server.ssl.SslSocketConnector">
					<property name="port" value="#{ systemProperties['webapp.port'] }" />             
                    <property name="keystoreType" value="JCEKS" />
                    <property name="truststoreType" value="JCEKS" />              
                    <property name="keystore" value="#{ systemProperties['GENEOSWS_CONFIG_HOME'] }/keystore.db" />
                    <property name="truststore" value="#{ systemProperties['GENEOSWS_CONFIG_HOME'] }/keystore.db" />
                    <property name="password" value="ab987c" />
                    <property name="trustPassword" value="ab987c" />
				</bean>
				-->
			</list>
		</property>

		<property name="handler">
			<bean id="handlers" class="org.eclipse.jetty.server.handler.HandlerList">
				<property name="handlers">
					<list>
						<!--
						<bean class="org.eclipse.jetty.webapp.WebAppContext">
							<property name="war" value="#{ systemProperties['GENEOSWS_BIN_HOME'] }/webapps/geneos-web-dashboard.war" />
							<property name="contextPath" value="/geneos-web-dashboard" />
						</bean>
						 -->

						<bean class="org.eclipse.jetty.webapp.WebAppContext">
							<property name="war" value="#{ systemProperties['GENEOSWS_BIN_HOME'] }/webapps/geneos-web-logon.war" />
							<property name="tempDirectory" value="#{ systemProperties['GENEOSWS_HOME'] }/temp/logon" />
							<property name="contextPath" value="/geneos-web-logon" />
						</bean>

						<bean id="geneosWebAppContext" class="org.eclipse.jetty.webapp.WebAppContext">
							<property name="war" value="#{ systemProperties['GENEOSWS_BIN_HOME'] }/webapps/geneos-web-app.war" />
							<property name="tempDirectory" value="#{ systemProperties['GENEOSWS_HOME'] }/temp/webapp" />
							<property name="contextPath" value="/" />
						</bean>
					</list>
				</property>
			</bean>
		</property>

	</bean>

</beans>
