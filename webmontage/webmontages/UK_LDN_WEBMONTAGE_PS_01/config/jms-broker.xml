<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://activemq.apache.org/schema/core"
			 xmlns:beans="http://www.springframework.org/schema/beans"
			 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
			 xsi:schemaLocation="http://www.springframework.org/schema/beans
			http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
			http://activemq.apache.org/schema/core
           http://activemq.apache.org/schema/core/activemq-core.xsd">

	<!-- Active MQ Server (embedded) -->
	<broker id="jmsBroker" brokerName="GeneosService" useJmx="false" persistent="false" useShutdownHook="false"
		allowTempAutoCreationOnSend="true" schedulePeriodForDestinationPurge="30000"
		cacheTempDestinations="true">

		<destinationPolicy>
			<policyMap>
				<policyEntries>
					<!-- Remove topics with no consumers/producers. http://activemq.apache.org/delete-inactive-destinations.html -->
					<policyEntry topic=">" gcInactiveDestinations="true"/>
					<policyEntry tempQueue="true" gcInactiveDestinations="true"/>
				</policyEntries>
			</policyMap>
		</destinationPolicy>

		<!-- JMX -->
		<managementContext>
			<managementContext createConnector="false" />
		</managementContext>

		<transportConnectors>
			<transportConnector name="vm" uri="vm://localhost" />
		</transportConnectors>
		
		<systemUsage>
            <systemUsage>
                <tempUsage>
                    <tempUsage limit="100 mb"/>
                </tempUsage>
            </systemUsage>
        </systemUsage>

	</broker>

</beans:beans>
