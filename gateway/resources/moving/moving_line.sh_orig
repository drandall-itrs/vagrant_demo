#!/bin/ksh

#set -x

file=source.txt
file_wip=source_wip.txt
line=0
total_lines=`cat $file | wc -l`
live_line=`grep \,1 $file | awk -F"," '{print $1}'`
IFS=","


if [ `expr "$live_line" + 1` -gt $total_lines ]
then
	line_to_use=1
else
	line_to_use=`expr "$live_line" + 1`
fi

cat $file | while read line value
do
	if [ $line -eq $line_to_use ]
	then
		echo "$line,1" >> $file_wip	
	else
		echo "$line,0" >> $file_wip
	fi
done

mv $file_wip $file
